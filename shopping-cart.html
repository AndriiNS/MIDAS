<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MIDAS</title>
    <link rel="stylesheet" href="css/main.css" />
    <link rel="stylesheet" href="fonts/Montserrat/stylesheet.css" />
  </head>
  <body>
    <div class="wrapper">
      <header class="header">
        <div class="header__row">
          <div class="header__logo">
            <a href="./index.html"><img src="./img/icons/Logo.svg" alt="logo" /></a>
          </div>
          <nav class="header__nav">
            <ul class="header__list">
              <li class="header__item"><a href="#" class="header__link fire">–ê–ö–¶–Ü–á</a></li>
              <li class="header__item">
                <a href="./catalog-warm.html" class="header__link arrow">–ì–ê–†–Ø–ß–ï</a>
                <div class="header__link-dropdown">
                  <a href="./catalog-warm.html">–ì–∞—Ä—è—á—ñ —Å—Ç—Ä–∞–≤–∏</a>
                  <a href="./catalog-warm.html">–°—É–ø–∏</a>
                  <a href="./catalog-warm.html">–•—ñ–Ω–∫–∞–ª—ñ</a>
                </div>
              </li>
              <li class="header__item">
                <a href="./catalog-cold.html" class="header__link arrow">–•–û–õ–û–î–ù–ï</a>
                <div class="header__link-dropdown">
                  <a href="./catalog-cold.html">–•–æ–ª–æ–¥–Ω—ñ —Å—Ç—Ä–∞–≤–∏</a>
                  <a href="./catalog-cold.html">–õ–∞–≤–∞—à—ñ</a>
                  <a href="./catalog-cold.html">–•—ñ–Ω–∫–∞–ª—ñ</a>
                </div>
              </li>
              <li class="header__item">
                <a href="./catalog-baken.html" class="header__link">–°–í–Ü–ñ–ê –≤–∏–ø—ñ—á–∫–∞</a>
              </li>
              <li class="header__item">
                <a href="./catalog-desert.html" class="header__link">–¥–µ—Å–µ—Ä—Ç–∏</a>
              </li>
              <li class="header__item">
                <a href="./catalog-drink.html" class="header__link">–Ω–∞–ø–æ—ó</a>
              </li>
            </ul>
          </nav>
          <div class="header__utils">
            <div class="header__search">
              <a href="#" class="header__utils-link">
                <svg
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M9.10932 18.2186C14.1403 18.2186 18.2186 14.1402 18.2186 9.10931C18.2186 4.07838 14.1403 0 9.10932 0C4.07834 0 0 4.07838 0 9.10931C0 14.1402 4.07834 18.2186 9.10932 18.2186ZM9.10932 16.0752C12.9565 16.0752 16.0753 12.9565 16.0753 9.10931C16.0753 5.26212 12.9565 2.14337 9.10932 2.14337C5.26214 2.14337 2.14337 5.26212 2.14337 9.10931C2.14337 12.9565 5.26214 16.0752 9.10932 16.0752Z"
                    fill="white"
                  />
                  <path
                    d="M15.4475 13.9319L24 22.4844L22.4844 24L13.9319 15.4475L15.4475 13.9319Z"
                    fill="white"
                  />
                </svg>
              </a>
            </div>
            <div class="header__user">
              <a href="#" class="header__utils-link">
                <svg
                  width="15"
                  height="24"
                  viewBox="0 0 15 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M7.5 9.28132C4.98992 9.28132 2.93347 7.19149 2.93347 4.64066C2.96371 2.08983 4.98992 0 7.5 0C10.0101 0 12.0665 2.08983 12.0665 4.64066C12.0665 7.19149 10.0403 9.28132 7.5 9.28132ZM7.5 2.08983C6.10887 2.08983 4.98992 3.22695 4.98992 4.64066C4.98992 6.05437 6.10887 7.19149 7.5 7.19149C8.89113 7.19149 10.0101 6.05437 10.0101 4.64066C10.0101 3.22695 8.89113 2.08983 7.5 2.08983Z"
                    fill="white"
                  />
                  <path
                    d="M12.9738 24V18.2553C12.9738 15.182 10.5242 12.7234 7.53024 12.7234C4.50605 12.7234 2.08669 15.2128 2.08669 18.2553V24H0V18.2553C0 14.0449 3.35685 10.6336 7.5 10.6336C11.6431 10.6336 15 14.0449 15 18.2553V24H12.9738Z"
                    fill="white"
                  />
                </svg>
              </a>
            </div>
            <div class="header__cart">
              <div id="cart-counter">1</div>
              <a href="#" class="header__utils-link">
                <svg
                  width="27"
                  height="25"
                  viewBox="0 0 27 25"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M4.44457 25L1.6327 13.8197H0V7.50297H6.22844L9.2822 0L11.0358 0.682088L8.2542 7.53262H18.6853L15.9339 0.682088L17.6876 0L20.7413 7.50297H26.9698V13.8197H25.3371L22.5252 25H4.44457ZM21.0739 23.1613L23.4323 13.8493H3.56775L5.92609 23.1613H21.0739ZM25.0952 11.981V9.40095H1.90482V11.981H25.0952Z"
                    fill="white"
                  />
                  <path d="M14.4523 15.3914H12.5475V22.064H14.4523V15.3914Z" fill="white" />
                  <path d="M18.0806 15.3914H16.1758V22.064H18.0806V15.3914Z" fill="white" />
                  <path d="M10.8242 15.3914H8.91936V22.064H10.8242V15.3914Z" fill="white" />
                </svg>
              </a>
            </div>
          </div>
        </div>
      </header>
      <main class="main">
        <section class="shopping-cart">
          <div class="shopping-cart__content">
            <div class="dish-card__box">
              <div class="shopping-cart__box">
                <p class="dish-card__title">–ö–æ—Ä–∑–∏–Ω–∞</p>
                <p id="shopping-cart__amount">6 —à—Ç</p>
              </div>
              <div class="breadcrambs">
                <a href="./index.html" class="main-page">–ì–æ–ª–æ–≤–Ω–∞</a>
                /
                <a href="#" class="current-page">–ö–æ—Ä–∑–∏–Ω–∞</a>
              </div>
            </div>
            <div class="for-pad">
              <div class="shopping-cart__product">
                <div class="cart__product-box">
                  <p class="product-box__name">–°—Ç—Ä–∞–≤–∞:</p>
                  <p class="product-box__price">–¶—ñ–Ω–∞:</p>
                  <p class="product-box__amount">–ö—ñ–ª—å–∫—ñ—Å—Ç—å:</p>
                  <p class="product-box__sum">–°—É–º–∞:</p>
                </div>
              </div>
              <div class="empty">
                <p>–î–æ–¥–∞–π—Ç–µ —â–æ—Å—å –¥–æ –∫–æ—Ä–∑–∏–Ω–∏, —â–æ–± –∑—Ä–æ–±–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</p>
                <p class="cart__empty">–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞ üòí</p>
              </div>
              <div class="shopping-cart__dish" id="cart-items"></div>
            </div>

            <script>
              document.addEventListener("DOMContentLoaded", () => {
                const cartItemsContainer = document.getElementById("cart-items");
                const finalSumNumber = document.querySelector(".final__sum-number");
                const shoppingCartNumber = document.getElementById("cart-counter");

                let cart = JSON.parse(localStorage.getItem("cart")) || [];

                const renderCart = () => {
                  cartItemsContainer.innerHTML = "";
                  cart.forEach((item, index) => {
                    const itemElement = document.createElement("div");
                    itemElement.classList.add("dish-card__product");

                    itemElement.innerHTML = `
        <img src="${item.img}" class="dish-card__product-img" alt="${item.name}" />
        <div class="card__product-inner">
          <div class="product-inner__name-box">
            <p class="product-inner__name">${item.name}</p>
          </div>
          <p class="order__price">${item.price} ‚Ç¥</p>
          <div class="order-box-counter cart">
            <button class="box__counter-btn decrease" data-index="${index}">-</button>
            <span class="box__counter-number">${item.quantity} —à—Ç</span>
            <button class="box__counter-btn increase" data-index="${index}">+</button>
          </div>
          <p class="order__price">${item.price * item.quantity} ‚Ç¥</p>
          <button class="delete__product" data-index="${index}">
            <img src="./img/icons/delete.svg" alt="delete" />
          </button>
        </div>
      `;

                    cartItemsContainer.appendChild(itemElement);
                  });
                  attachEventListeners();
                  updateFinalSum();
                  updateCartNumber();
                };

                const attachEventListeners = () => {
                  const increaseButtons = document.querySelectorAll(".box__counter-btn.increase");
                  const decreaseButtons = document.querySelectorAll(".box__counter-btn.decrease");
                  const deleteButtons = document.querySelectorAll(".delete__product");
                  const emptyCart = document.querySelector(".empty");

                  increaseButtons.forEach((button) => {
                    button.addEventListener("click", (event) => {
                      const index = event.target.dataset.index;
                      if (cart[index].quantity < 9) {
                        cart[index].quantity += 1;
                        localStorage.setItem("cart", JSON.stringify(cart));
                        renderCart();
                      }
                    });
                  });

                  decreaseButtons.forEach((button) => {
                    button.addEventListener("click", (event) => {
                      const index = event.target.dataset.index;
                      if (cart[index].quantity > 1) {
                        cart[index].quantity -= 1;
                        localStorage.setItem("cart", JSON.stringify(cart));
                        renderCart();
                      }
                    });
                  });
                  const toggleEmptyCartText = () => {
                    const cart = JSON.parse(localStorage.getItem("cart")) || [];
                    if (emptyCart) {
                      emptyCart.style.display = cart.length === 0 ? "block" : "none";
                    }
                  };
                  deleteButtons.forEach((button) => {
                    button.addEventListener("click", (event) => {
                      const index = event.target.dataset.index;
                      cart.splice(index, 1);
                      localStorage.setItem("cart", JSON.stringify(cart));
                      renderCart();
                      toggleEmptyCartText();
                    });
                  });
                };
                const updateCartNumber = () => {
                  const cart = JSON.parse(localStorage.getItem("cart")) || [];
                  const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
                  shoppingCartNumber.textContent = totalItems;
                  shoppingCartNumber.style.display = totalItems > 0 ? "block" : "none";
                };
                const updateFinalSum = () => {
                  const totalSum = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
                  finalSumNumber.textContent = `${totalSum} ‚Ç¥`;
                };

                renderCart();
              });
            </script>
          </div>
        </section>
        <section class="promo">
          <div class="promo__content">
            <p class="promo__text">–í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –ø—Ä–æ–º–æ</p>
            <div class="promo__input-box">
              <input type="text" />
              <button class="check__promo">–í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏</button>
            </div>
            <div class="promo__final">
              <p class="final__sum-text">–í—Å—å–æ–≥–æ –¥–æ —Å–ø–ª–∞—Ç–∏:</p>
              <p class="final__sum-number"></p>
            </div>
            <button class="palce__order">–û—Ñ–æ—Ä–º–∏—Ç–∏ –∑–∞–∫–∞–∑</button>
          </div>
        </section>
      </main>
      <footer class="footer">
        <div class="footer__row">
          <div class="footer__logo">
            <img src="./img/icons/Logo.svg" alt="logo" />
          </div>
          <div class="footer__inner">
            <nav class="footer__menu">
              <ul class="footer__list">
                <li class="footer__item">
                  <a href="#" class="footer__link">–ó–≤–æ—Ä–æ—Ç–Ω—ñ–π –∑–≤'—è–∑–æ–∫</a>
                </li>
                <li class="footer__item"><a href="#" class="footer__link">–û–ø–ª–∞—Ç–∞</a></li>
                <li class="footer__item"><a href="#" class="footer__link">–î–æ—Å—Ç–∞–≤–∫–∞</a></li>
                <li class="footer__item"><a href="#" class="footer__link">–ö–æ–Ω—Ç–∞–∫—Ç–∏</a></li>
              </ul>
            </nav>
            <div class="footer__row-box">
              <a href="tel:+3808416729" class="footer__row-tel">+(380) 84-16-72-912</a>
              <a href="mailto:delivery@midas.rest" class="footer__row-gmail">
                delivery@midas.rest
              </a>
            </div>
          </div>
        </div>
        <div class="footer__policy">
          <p class="footer__privacy">¬© 2009‚Äì2019, –û–û–û ¬´MIDAS¬ª, –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π —Å–∞–π—Ç</p>
          <div class="footer__policy-box">
            <a href="#" class="footer__policy-policy">–ü–æ–ª—ñ—Ç–∏–∫–∞ –∫–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω–æ—Å—Ç—ñ —Ç–∞ –æ—Ñ–µ—Ä—Ç–∞</a>
            <a href="#" class="footer__policy-user">–£–º–æ–≤–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</a>
          </div>
        </div>
      </footer>
    </div>
    <script src="./js/main.js" type="module"></script>
  </body>
</html>
